{% extends "layout.html" %}
{% block title %}Edit Page: {{ page.slug }}{% endblock %}
{% block content %}
<div class="card">
  <h2>Edit Page â€” {{ page.slug }}</h2>
  <form method="post">
    <label>Title<br>
      <input type="text" name="title" value="{{ page.title }}" style="width:100%" required>
    </label>
    <p>
      <label>Content (HTML allowed)<br>
        <input type="hidden" name="content" id="content-input">
        <div id="quill-editor" style="height:350px;border-radius:6px">{{ page.content|safe }}</div>
      </label>
    </p>
    <p>
      <button class="btn" type="submit">Save Page</button>
      <a href="/admin/pages" style="margin-left:12px" class="btn">Back</a>
    </p>
  </form>
</div>
<!-- Quill (no API key required) -->
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
<script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
<script>
  const quill = new Quill('#quill-editor', { theme: 'snow', modules: { toolbar: [['bold','italic','underline'],[{ 'list': 'ordered' }, { 'list': 'bullet' }], ['link','image'], ['clean']] } });
  // populate hidden input on submit
  document.querySelector('form').addEventListener('submit', function(e){
    document.getElementById('content-input').value = quill.root.innerHTML;
  });
</script>
{% endblock %}
