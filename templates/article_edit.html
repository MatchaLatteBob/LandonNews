{% extends "layout.html" %}
{% block title %}Edit Article{% endblock %}
{% block content %}
<div class="card">
  <h2>Edit Article</h2>
  <form method="post">
    <label>Title<br>
      <input name="title" style="width:100%" value="{{ article.title }}" required>
    </label>
    <p>
      <label>Content<br>
        <input type="hidden" name="content" id="content-input">
        <div id="quill-editor" style="height:400px;border-radius:6px">{{ article.content|safe }}</div>
      </label>
    </p>
    <p>
      <button name="action" value="save" type="submit" class="btn">Save</button>
      <button name="action" value="submit" type="submit" class="btn">Submit for Review</button>
      {% if user and user.role == 'admin' %}
        <button name="action" value="publish" type="submit" class="btn">Publish</button>
      {% endif %}
    </p>
  </form>
</div>
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
<script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
<script>
  const quill = new Quill('#quill-editor', { theme: 'snow', modules: { toolbar: [['bold','italic','underline'],[{ 'list': 'ordered' }, { 'list': 'bullet' }], ['link','image'], ['clean']] } });
  document.querySelector('form').addEventListener('submit', function(e){
    document.getElementById('content-input').value = quill.root.innerHTML;
  });
</script>
{% endblock %}
